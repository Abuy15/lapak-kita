// Tampilkan dagangan jika sudah login
        if (myWa) {
            onValue(ref(db, 'products'), (snapshot) => {
                const data = snapshot.val();
                const container = document.getElementById('my-products');
                container.innerHTML = "";
                let count = 0;

                if (data) {
                    Object.keys(data).reverse().forEach(key => {
                        const p = data[key];
                        if (String(p.wa) === String(myWa)) {
                            count++;
                            container.innerHTML += `
                                <div class="flex items-center gap-4 bg-white p-3 border border-gray-100 rounded-2xl shadow-sm">
                                    <img src="${p.foto}" class="w-16 h-16 object-cover rounded-xl" onerror="this.src='https://via.placeholder.com/150'">
                                    <div class="flex-1">
                                        <h4 class="text-xs font-bold text-gray-800 line-clamp-1">${p.nama}</h4>
                                        <p class="text-green-600 font-black text-xs">Rp ${Number(p.harga).toLocaleString('id-ID')}</p>
                                    </div>
                                    <button onclick="hapusBarang('${key}')" class="w-10 h-10 bg-red-50 text-red-500 rounded-xl flex items-center justify-center active:bg-red-100">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </div>
                            `;
                        }
                    });
                }
                document.getElementById('count-barang').innerText = count + " Barang";
                if (count === 0) container.innerHTML = "<p class='text-center text-gray-400 py-10 text-xs italic'>Kamu belum punya dagangan aktif.</p>";
            });
        } else {
            // TAMPILAN TOMBOL LOGIN JIKA BELUM MASUK
            document.getElementById('my-products').innerHTML = `
                <div class="text-center py-10">
                    <i class="fas fa-lock text-4xl text-gray-200 mb-4"></i>
                    <p class="text-gray-500 text-sm mb-6">Sampeyan belum login, Lur.</p>
                    <a href="login.html" class="inline-block w-full bg-green-600 text-white font-bold py-4 rounded-2xl shadow-lg active:scale-95 transition-all text-center">
                        Login / Daftar Sekarang
                    </a>
                </div>
            `;
        }

        // Global function agar bisa dipanggil HTML
        window.hapusBarang = (key) => {
            if (confirm("Sampun payu? Dagangan pan dihapus?")) {
                remove(ref(db, 'products/' + key));
            }
        };

        window.logout = () => {
            if (confirm("Yakin ingin keluar?")) {
                localStorage.clear();
                window.location.href = "login.html"; // PAKAI TANDA KUTIP
            }
        };